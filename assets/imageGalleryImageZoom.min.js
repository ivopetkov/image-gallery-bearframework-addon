var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom=ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom||function(){var e,n,t=()=>{if(void 0!==EventTarget&&void 0!==EventTarget.constructor)try{return new EventTarget}catch(e){}var e=[];return{addEventListener:(n,t)=>{n in e||(e[n]=[]),e[n].push(t)},removeEventListener:(n,t)=>{if(n in e)for(var r=e[n],o=0,i=r.length;o<i;o++)if(r[o]===t)return void r.splice(o,1)},dispatchEvent:n=>{if(!(n.type in e))return!0;for(var t=e[n.type].slice(),r=0,o=t.length;r<o;r++)t[r].call(this,n);return!n.defaultPrevented}}},r=(e=function(e,n){var t=e.clientX,r=e.clientY,o=n.clientX,i=n.clientY;return Math.round(Math.sqrt(Math.pow(Math.abs(o-t),2)+Math.pow(Math.abs(i-r),2)))},n=function(e){e.style.setProperty("user-select","none"),e.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1})},{getZoomEventTarget:function(r,o){void 0===o&&(o=r),n(o);var i=t(),v=[],a=null,d=1,c=function(){var e=new Event("end");e.change=d,i.dispatchEvent(e)},s=function(e){for(var n in v)v[n].downEvent.pointerId===e.pointerId&&(v.splice(n,1),1===v.length&&c())};return r.addEventListener("pointerdown",(function(n){for(var t in v)if(v[t].downEvent.pointerId===n.pointerId)return;v.push({downEvent:n,moveEvent:n}),2===v.length&&function(){for(var n=0;n<v.length;n++){var t=v[n];t.downEvent=t.moveEvent}a=e(v[0].downEvent,v[1].downEvent);var r=new Event("start");i.dispatchEvent(r)}()})),o.addEventListener("pointermove",(function(n){if(2===v.length){for(var t=0;t<2;t++){var r=v[t];r.downEvent.pointerId===n.pointerId&&(r.moveEvent=n)}var o=e(v[0].moveEvent,v[1].moveEvent);d=o/a,(n=new Event("change")).change=d,i.dispatchEvent(n)}})),o.addEventListener("pointerup",s),o.addEventListener("pointercancel",s),o.addEventListener("pointerout",s),o.addEventListener("pointerleave",s),i},getMoveEventTarget:function(e,r){void 0===r&&(r=e),n(r);var o=t(),i=[],v=[0,0],a=[0,0],d=function(e){var n=i.length;if(1===n){var t=e?i[0].downEvent:i[0].moveEvent;return[t.clientX,t.clientY]}if(n>1){var r=e?i[0].downEvent:i[0].moveEvent,o=e?i[1].downEvent:i[1].moveEvent;return[r.clientX-(r.clientX-o.clientX)/2,r.clientY-(r.clientY-o.clientY)/2]}return[0,0]},c=function(){v=d(!0);var e=new Event("start");o.dispatchEvent(e)},s=function(){var e=new Event("end");e.changeX=a[0],e.changeY=a[1],o.dispatchEvent(e),a=[0,0];for(var n=0;n<i.length;n++){var t=i[n];t.downEvent=t.moveEvent}},E=function(e){for(var n in i)i[n].downEvent.pointerId===e.pointerId&&(i.splice(n,1),s(),i.length>0&&c())};return e.addEventListener("pointerdown",(function(e){for(var n in i)if(i[n].downEvent.pointerId===e.pointerId)return;i.push({downEvent:e,moveEvent:e}),i.length>1&&s(),c()})),r.addEventListener("pointermove",(function(e){for(var n=0;n<i.length;n++){var t=i[n];t.downEvent.pointerId===e.pointerId&&(t.moveEvent=e)}if(0!==i.length){var r=d(!1);a=[Math.round(r[0]-v[0]),Math.round(r[1]-v[1])],(e=new Event("change")).changeX=a[0],e.changeY=a[1],o.dispatchEvent(e)}})),r.addEventListener("pointerup",E),r.addEventListener("pointercancel",E),r.addEventListener("pointerout",E),r.addEventListener("pointerleave",E),o},getDoubleTapEventTarget:function(e){n(e);var r=t(),o=[],i=[];return e.addEventListener("pointerdown",(function(e){for(var n in o)if(o[n].pointerId===e.pointerId)return;o.push(e),1===o.length&&i.push([0,(new Date).getTime()])})),e.addEventListener("pointerup",(function(e){for(var n in o)if(o[n].pointerId===e.pointerId&&(o.splice(n,1),0===o.length)){i.push([1,(new Date).getTime()]);var t=i.length-4;if(t<0&&(t=0),4===(i=i.slice(t)).length){for(var v=0,a=1;a<=i.length;a++)v+=a*i[a-1][0];6===v&&i[3][1]-i[0][1]<500&&(e=new Event("done"),r.dispatchEvent(e))}}})),r},getSwipeEventTarget:function(e,r){void 0===r&&(r=e),n(r);var o=t(),i=[],v=[0,0,null],a=function(e){for(var n in i)i[n].downEvent.pointerId===e.pointerId&&(i.splice(n,1),(e=new Event("end")).changeX=v[0],e.changeY=v[1],e.direction=v[2],o.dispatchEvent(e),v=[0,0,null])};return e.addEventListener("pointerdown",(function(e){if(1!==i.length){for(var n in i)if(i[n].downEvent.pointerId===e.pointerId)return;i.push({downEvent:e,moveEvent:e}),e=new Event("start"),o.dispatchEvent(e)}})),r.addEventListener("pointermove",(function(e){for(var n=0;n<i.length;n++){var t=i[n];t.downEvent.pointerId===e.pointerId&&(t.moveEvent=e)}if(0!==i.length){var r=i[0],a=r.moveEvent.clientX-r.downEvent.clientX,d=r.moveEvent.clientY-r.downEvent.clientY,c=null;c=Math.abs(a)>Math.abs(d)?a<0?"left":"right":d<0?"up":"down",(e=new Event("change")).changeX=a,e.changeY=d,e.direction=c,o.dispatchEvent(e),v=[a,d,c]}})),r.addEventListener("pointerup",a),r.addEventListener("pointercancel",a),r.addEventListener("pointerout",a),r.addEventListener("pointerleave",a),o}});return{addZoom:function(e,n){var o=r.getZoomEventTarget(e,n),i=r.getDoubleTapEventTarget(e),v=r.getMoveEventTarget(e,n),a=t(),d=function(){a.dispatchEvent(new Event("start"))},c=function(){a.dispatchEvent(new Event("end"))};e.style.setProperty("transform","scale(var(--touch-events-zoom-scale)) translate(var(--touch-events-move-x),var(--touch-events-move-y))");var s=null,E=null,u=[0,0],h=function(n,t,r){var o=null!==s?s:1;if(!r||1!==E){var i=(r?u[0]:0)+n[0]/o/E,v=(r?u[1]:0)+n[1]/o/E;t||(u=[i,v]),e.style.setProperty("--touch-events-move-x",i+"px"),e.style.setProperty("--touch-events-move-y",v+"px")}};h([0,0],!1,!1);var p=function(n,t,r){var o=r?E*n:n;o<1&&(o=1),t?s=n:(s=null,E=o),e.style.setProperty("--touch-events-zoom-scale",o),t||1!==E||h([0,0],!1,!1)};p(1,!1,!1);var l=function(){e.style.setProperty("transition","transform 0.2s ease-out"),setTimeout((function(){e.style.removeProperty("transition")}),210)};return o.addEventListener("start",(function(e){d()})),o.addEventListener("change",(function(e){p(e.change,!0,!0)})),o.addEventListener("end",(function(e){p(e.change,!1,!0),c()})),i.addEventListener("done",(function(e){l(),p(1,!1,!1),h([0,0],!1,!1),d(),c()})),v.addEventListener("start",(function(e){})),v.addEventListener("change",(function(e){h([e.changeX,e.changeY],!0,!0)})),v.addEventListener("end",(function(e){h([e.changeX,e.changeY],!1,!0)})),a.zoomIn=function(e){l(),p(void 0!==e?e:2,!1,!1),d(),c()},a.zoomOut=function(){l(),p(1,!1,!1),h([0,0],!1,!1),d(),c()},a.hasZoom=function(){return null!==s||E>1},a},addSwipe:function(e,n){var o=r.getSwipeEventTarget(e,n),i=t();return o.addEventListener("start",(function(e){var n=new Event("start");i.dispatchEvent(n)})),o.addEventListener("change",(function(e){var n=new Event("change");n.direction=e.direction,n.changeX=e.changeX,n.changeY=e.changeY,i.dispatchEvent(n)})),o.addEventListener("end",(function(e){var n=new Event("end");n.direction=e.direction,n.changeX=e.changeX,n.changeY=e.changeY,i.dispatchEvent(n)})),i}}}();
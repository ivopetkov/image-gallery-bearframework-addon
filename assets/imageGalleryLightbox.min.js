var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var e=function(e,t){var i=window.innerWidth-10,n=window.innerHeight-10;return t>n&&(e*=n/t),e>i&&(e=i),Math.floor(e)},t={},i=!1,n=function(){var t=document.getElementById("imggalleryswp0");if(t)for(var i=t.firstChild.childNodes,n=0;n<i.length;n++){var o=i[n].firstChild;o.style.width=e(o.getAttribute("data-max-width"),o.getAttribute("data-max-height"))+"px"}};return{open:function(o,a,r){i||(i=!0,window.addEventListener("resize",n));var s=function(t){try{var i=JSON.parse(t)}catch(e){i={}}void 0!==i.status&&"1"===i.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(){var t=i.result,n=t.length,a='<div id="imggalleryswp0" style="width:100vw;height:100vh;position:relative;">';a+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;">';for(var s=0;s<n;s++){var d=t[s];a+='<div style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;overflow:hidden;">',a+='<div data-max-width="'+d[0]+'" data-max-height="'+d[1]+'" style="width:'+e(d[0],d[1])+'px;font-size:0;line-height:0;"></div>',a+="</div>"}a+="</div>",a+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',a+='<span data-image-gallery-button="next"></span>',a+='<span data-image-gallery-button="previous"></span>',a+='<span data-image-gallery-button="close"></span>',a+='<span data-image-gallery-button="zoomin"></span>',a+='<span data-image-gallery-button="zoomout"></span>',a+="</div>",a+="</div>",o.open(a,{spacing:"0px",showCloseButton:!1}).then((function(){for(var e=document.getElementById("imggalleryswp0"),i=e.firstChild,a=e.childNodes[1],s=0;s<n;s++){var d=t[s];html5DOMDocument.insert(d[2],[i.childNodes[s].firstChild])}var l=r,v=[],c=[],u=i.childNodes,h=function(e){return i.childNodes[e].firstChild},f=function(e){var t=h(e);return parseInt(t.getAttribute("data-max-width"))/parseInt(t.style.width.replace("px",""))},p=null,y=function(e){var t=h(e).querySelector("[data-responsively-lazy]");if(null!==t){if(null===t.getAttribute("data-responsively-lazy-preferred-option")){t.setAttribute("data-responsively-lazy-preferred-option","999999");try{responsivelyLazy.run()}catch(e){}}}},g=[],m=function(e){void 0===g[e]&&(g[e]=null),c[e].hasZoom()!==g[e]&&p()},w=function(e){u[e].style.setProperty("transition","transform 0.3s ease-out")},b=function(e){w(e),setTimeout((function(){u[e].style.removeProperty("transition")}),316)},x=function(e,t,i){var n="var(--swipe-x)";0===t?n="-100vw":2===t&&(n="100vw");var o=u[e];i?1!==t&&setTimeout((function(){w(e)}),50):1===t?b(e):(o.style.setProperty("--swipe-x","0"),w(e)),o.style.setProperty("transform","translate("+n+",0)")},k=function(e){if(void 0===t[e])return!1;x(e,1,!1);for(var i=0;i<e;i++)x(i,0,!1);for(i=e+1;i<n;i++)x(i,2,!1);return l=e,p(),!0};for(s=0;s<u.length;s++)!function(e){var t=u[e];x(e,e===l?1:e<l?0:2,!0),t.style.setProperty("display","flex"),c[e]=ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom.addZoom(t.firstChild,t),v[e]=ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom.addSwipe(t),v[e].addEventListener("change",(function(i){c[e].hasZoom()||n<2||t.style.setProperty("--swipe-x",i.changeX+"px")})),v[e].addEventListener("end",(function(i){if(!(c[e].hasZoom()||n<2)){var o=i.changeX;Math.abs(o)>100&&k(o>0?l-1:l+1)||(b(e),t.style.setProperty("--swipe-x","0"))}})),c[e].addEventListener("start",(function(){y(e),setTimeout((function(){m(e)}),50)})),c[e].addEventListener("end",(function(){m(e)}))}(s);var P=a.childNodes[0],z=a.childNodes[1],L=a.childNodes[2],E=a.childNodes[3],A=a.childNodes[4];p=function(){n>1&&(P.style.display=l+1<n?"flex":"none",z.style.display=0===l?"none":"flex");var e=c[l],t=f(l)>1,i=e.hasZoom();E.style.display=t&&!i?"block":"none",A.style.display=t&&i?"block":"none"};var N=function(e){c[l].hasZoom()&&c[l].zoomOut(),k(e)};P.addEventListener("click",(function(){N(l+1)})),z.addEventListener("click",(function(){N(l-1)})),L.addEventListener("click",o.close),E.addEventListener("click",(function(){c[l].zoomIn(f(l)),p()})),A.addEventListener("click",(function(){c[l].zoomOut(),p()})),p()}))}))};void 0!==t[a]?s(t[a]):clientPackages.get("serverRequests").then((function(e){e.send("-ivopetkov-image-gallery-get-images",{serverData:a}).then((function(e){t[a]=e,s(e)}))}))}}}();
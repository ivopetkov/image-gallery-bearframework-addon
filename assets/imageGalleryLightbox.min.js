var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var t=function(t,e){var i=window.innerWidth-10,n=window.innerHeight-10;return e>n&&(t*=n/e),t>i&&(t=i),Math.floor(t)},e={},i=0;return{open:function(n,o,a){i++;var r=function(e){try{var o=JSON.parse(e)}catch(t){o={}}void 0!==o.status&&"1"===o.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(e){if(n.isActive()){var r=o.result,s=r.length,d="imggalleryswp"+i,l='<div id="'+d+'" style="width:100%;height:100%;position:fixed;top:0;left:0;user-select:none;">';l+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;">';for(var c=0;c<s;c++){var v=r[c];l+='<div style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;overflow:hidden;">',l+='<div data-max-width="'+v[0]+'" data-max-height="'+v[1]+'" style="width:'+t(v[0],v[1])+'px;font-size:0;line-height:0;"></div>',l+="</div>"}l+="</div>",l+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',l+='<span data-image-gallery-button="next"></span>',l+='<span data-image-gallery-button="previous"></span>',l+='<span data-image-gallery-button="close"></span>',l+='<span data-image-gallery-button="zoomin"></span>',l+='<span data-image-gallery-button="zoomout"></span>',l+="</div>",l+="</div>",n.open(l,{spacing:"0px",showCloseButton:!1}).then((function(){for(var i=document.getElementById(d),o=i.firstChild,l=i.childNodes[1],c=o.getBoundingClientRect().width,v=0;v<s;v++){var u=r[v];html5DOMDocument.insert(u[2],[o.childNodes[v].firstChild])}var f=a,h=[],p=o.childNodes,g=function(t){var e=function(t){return o.childNodes[t].firstChild}(t);return parseInt(e.getAttribute("data-max-width"))/parseInt(e.style.width.replace("px",""))},y=null,m=[],x=function(t){void 0===m[t]&&(m[t]=null),h[t].hasZoom()!==m[t]&&y()},w=function(t){!function(t){p[t].style.setProperty("transition","transform 0.3s ease-out")}(t),setTimeout((function(){p[t].style.removeProperty("transition")}),316)},b=function(t){var e="0px";t<f?e="-100vw":t>f&&(e="100vw"),p[t].style.setProperty("--igi-position",e)},k=function(t){try{var e=p[t];if(void 0!==e){var i=e.querySelector("[data-responsively-lazy]");null!==i&&responsivelyLazy.run(i,{ignoreThreshold:!0})}}catch(t){}},P=function(t,e,i){void 0!==r[t]&&(i&&w(t),p[t].style.setProperty("--igi-swipe",e))},z=function(t){if(void 0===r[t])return!1;f=t;for(var e=0;e<s;e++)b(e);return P(t-1,"0px",!0),P(t,"0px",!0),P(t+1,"0px",!0),k(t-1),k(t),k(t+1),y(),!0};for(v=0;v<p.length;v++)!function(t){var i=p[t];b(t),P(t,"0px",!1),i.style.setProperty("transform","translate(calc(var(--igi-position) + var(--igi-swipe)),0)"),i.style.setProperty("display","flex");var n=i.querySelector("img");null!==n&&n.style.setProperty("pointer-events","none"),h[t]=e.addZoom(i.firstChild,i,(function(){setTimeout((function(){x(t)}),50)}),(function(){setTimeout((function(){k(t)}),210),x(t)})),e.addSwipe(i,(function(e){if(!(h[t].hasZoom()||s<=1)){var i=e.changeX+"px";P(t-1,i,!1),P(t,i,!1),P(t+1,i,!1)}}),(function(e){if(!(h[t].hasZoom()||s<=1)){var i=e.changeX;Math.abs(i)>.1*c&&z(i>0?f-1:f+1)||(P(t-1,"0px",!0),P(t,"0px",!0),P(t+1,"0px",!0))}}))}(v);var N=l.childNodes[0],E=l.childNodes[1],L=l.childNodes[2],C=l.childNodes[3],A=l.childNodes[4];y=function(){s>1&&(N.style.display=f+1<s?"flex":"none",E.style.display=0===f?"none":"flex");var t=h[f],e=g(f)>1,i=t.hasZoom();C.style.display=e&&!i?"block":"none",A.style.display=i?"block":"none"};var I=function(t){h[f].hasZoom()&&h[f].zoomOut(),z(t)};N.addEventListener("click",(function(){I(f+1)})),E.addEventListener("click",(function(){I(f-1)})),L.addEventListener("click",n.close),C.addEventListener("click",(function(){h[f].zoomIn(g(f)),y()})),A.addEventListener("click",(function(){h[f].zoomOut(),y()})),k(f-1),k(f),k(f+1),y(),document.body.addEventListener("keydown",(function(t){if(document.getElementById(d)){var e=t.keyCode;39===e?I(f+1):37===e&&I(f-1)}})),window.addEventListener("resize",(function(){var e=document.getElementById(d);if(e){for(var i=e.firstChild.childNodes,n=0;n<i.length;n++){var o=i[n].firstChild;o.style.width=t(o.getAttribute("data-max-width"),o.getAttribute("data-max-height"))+"px"}y()}}))}))}}))};void 0!==e[o]?r(e[o]):clientPackages.get("serverRequests").then((function(t){t.send("-ivopetkov-image-gallery-get-images",{serverData:o}).then((function(t){e[o]=t,r(t)}))}))}}}();
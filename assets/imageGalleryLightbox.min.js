var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var e=function(e,t){var i=window.innerWidth-10,n=window.innerHeight-10;return t>n&&(e*=n/t),e>i&&(e=i),Math.floor(e)},t={},i=0;return{open:function(n,o,a){i++;var r=function(t){try{var o=JSON.parse(t)}catch(e){o={}}void 0!==o.status&&"1"===o.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(){var t=o.result,r=t.length,s="imggalleryswp"+i,d='<div id="'+s+'" style="width:100%;height:100%;position:fixed;top:0;left:0;">';d+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;">';for(var l=0;l<r;l++){var v=t[l];d+='<div style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;overflow:hidden;">',d+='<div data-max-width="'+v[0]+'" data-max-height="'+v[1]+'" style="width:'+e(v[0],v[1])+'px;font-size:0;line-height:0;"></div>',d+="</div>"}d+="</div>",d+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',d+='<span data-image-gallery-button="next"></span>',d+='<span data-image-gallery-button="previous"></span>',d+='<span data-image-gallery-button="close"></span>',d+='<span data-image-gallery-button="zoomin"></span>',d+='<span data-image-gallery-button="zoomout"></span>',d+="</div>",d+="</div>",n.open(d,{spacing:"0px",showCloseButton:!1}).then((function(){for(var i=document.getElementById(s),o=i.firstChild,d=i.childNodes[1],l=0;l<r;l++){var v=t[l];html5DOMDocument.insert(v[2],[o.childNodes[l].firstChild])}var c=a,u=[],p=[],f=o.childNodes,h=function(e){return o.childNodes[e].firstChild},y=function(e){var t=h(e);return parseInt(t.getAttribute("data-max-width"))/parseInt(t.style.width.replace("px",""))},g=null,m=function(e){var t=h(e).querySelector("[data-responsively-lazy]");if(null!==t){if(null===t.getAttribute("data-responsively-lazy-preferred-option")){t.setAttribute("data-responsively-lazy-preferred-option","999999");try{responsivelyLazy.run()}catch(e){}}}},x=[],w=function(e){void 0===x[e]&&(x[e]=null),p[e].hasZoom()!==x[e]&&g()},b=function(e){!function(e){f[e].style.setProperty("transition","transform 0.3s ease-out")}(e),setTimeout((function(){f[e].style.removeProperty("transition")}),316)},k=function(e){var t="0px";e<c?t="-100vw":e>c&&(t="100vw"),f[e].style.setProperty("--igi-position",t)},P=function(e,i,n){void 0!==t[e]&&(n&&b(e),f[e].style.setProperty("--igi-swipe",i))},E=function(e){if(void 0===t[e])return!1;c=e;for(var i=0;i<r;i++)k(i);return P(e-1,"0px",!0),P(e,"0px",!0),P(e+1,"0px",!0),g(),!0};for(l=0;l<f.length;l++)!function(e){var t=f[e];k(e),P(e,"0px",!1),t.style.setProperty("transform","translate(calc(var(--igi-position) + var(--igi-swipe)),0)"),t.style.setProperty("display","flex");var i=t.querySelector("img");null!==i&&i.style.setProperty("pointer-events","none"),p[e]=ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom.addZoom(t.firstChild,t),u[e]=ivoPetkov.bearFrameworkAddons.imageGalleryImageZoom.addSwipe(t),u[e].addEventListener("change",(function(t){if(!(p[e].hasZoom()||r<2)){var i=t.changeX+"px";P(e-1,i,!1),P(e,i,!1),P(e+1,i,!1)}})),u[e].addEventListener("end",(function(t){if(!(p[e].hasZoom()||r<2)){var i=t.changeX;Math.abs(i)>40&&E(i>0?c-1:c+1)||(P(e-1,"0px",!0),P(e,"0px",!0),P(e+1,"0px",!0))}})),p[e].addEventListener("start",(function(){m(e),setTimeout((function(){w(e)}),50)})),p[e].addEventListener("end",(function(){w(e)}))}(l);var L=d.childNodes[0],z=d.childNodes[1],A=d.childNodes[2],N=d.childNodes[3],C=d.childNodes[4];g=function(){r>1&&(L.style.display=c+1<r?"flex":"none",z.style.display=0===c?"none":"flex");var e=p[c],t=y(c)>1,i=e.hasZoom();N.style.display=t&&!i?"block":"none",C.style.display=t&&i?"block":"none"};var I=function(e){p[c].hasZoom()&&p[c].zoomOut(),E(e)};L.addEventListener("click",(function(){I(c+1)})),z.addEventListener("click",(function(){I(c-1)})),A.addEventListener("click",n.close),N.addEventListener("click",(function(){p[c].zoomIn(y(c)),g()})),C.addEventListener("click",(function(){p[c].zoomOut(),g()})),g(),document.body.addEventListener("keydown",(function(e){if(document.getElementById(s)){var t=e.keyCode;39===t?I(c+1):37===t&&I(c-1)}})),window.addEventListener("resize",(function(){var t=document.getElementById(s);if(t){for(var i=t.firstChild.childNodes,n=0;n<i.length;n++){var o=i[n].firstChild;o.style.width=e(o.getAttribute("data-max-width"),o.getAttribute("data-max-height"))+"px"}g()}}))}))}))};void 0!==t[o]?r(t[o]):clientPackages.get("serverRequests").then((function(e){e.send("-ivopetkov-image-gallery-get-images",{serverData:o}).then((function(e){t[o]=e,r(e)}))}))}}}();
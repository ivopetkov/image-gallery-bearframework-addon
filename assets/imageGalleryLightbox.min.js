var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var e=function(e,t){var i=window.innerWidth-10,n=window.innerHeight-10;return t>n&&(e*=n/t),e>i&&(e=i),Math.floor(e)},t={},i=0;return{open:function(n,o,a){i++;var r=function(t){try{var o=JSON.parse(t)}catch(e){o={}}void 0!==o.status&&"1"===o.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(t){if(n.isActive()){var r=o.result,s=r.length,d="imggalleryswp"+i,l='<div id="'+d+'" style="width:100%;height:100%;position:fixed;top:0;left:0;user-select:none;">';l+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;">';for(var c=0;c<s;c++){var v=r[c];l+='<div style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;overflow:hidden;">',l+='<div data-max-width="'+v[0]+'" data-max-height="'+v[1]+'" style="width:'+e(v[0],v[1])+'px;font-size:0;line-height:0;"></div>',l+="</div>"}l+="</div>",l+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',l+='<span data-image-gallery-button="next"></span>',l+='<span data-image-gallery-button="previous"></span>',l+='<span data-image-gallery-button="close"></span>',l+='<span data-image-gallery-button="zoomin"></span>',l+='<span data-image-gallery-button="zoomout"></span>',l+="</div>",l+="</div>",n.open(l,{spacing:"0px",showCloseButton:!1}).then((function(){for(var i=document.getElementById(d),o=i.firstChild,l=i.childNodes[1],c=0;c<s;c++){var v=r[c];html5DOMDocument.insert(v[2],[o.childNodes[c].firstChild])}var u=a,p=[],f=o.childNodes,h=function(e){return o.childNodes[e].firstChild},y=function(e){var t=h(e);return parseInt(t.getAttribute("data-max-width"))/parseInt(t.style.width.replace("px",""))},g=null,m=function(e){var t=h(e).querySelector("[data-responsively-lazy]");if(null!==t){if(null===t.getAttribute("data-responsively-lazy-preferred-option")){t.setAttribute("data-responsively-lazy-preferred-option","999999");try{responsivelyLazy.run()}catch(e){}}}},x=[],w=function(e){void 0===x[e]&&(x[e]=null),p[e].hasZoom()!==x[e]&&g()},b=function(e){!function(e){f[e].style.setProperty("transition","transform 0.3s ease-out")}(e),setTimeout((function(){f[e].style.removeProperty("transition")}),316)},k=function(e){var t="0px";e<u?t="-100vw":e>u&&(t="100vw"),f[e].style.setProperty("--igi-position",t)},P=function(e,t,i){void 0!==r[e]&&(i&&b(e),f[e].style.setProperty("--igi-swipe",t))},z=function(e){if(void 0===r[e])return!1;u=e;for(var t=0;t<s;t++)k(t);return P(e-1,"0px",!0),P(e,"0px",!0),P(e+1,"0px",!0),g(),!0};for(c=0;c<f.length;c++)!function(e){var i=f[e];k(e),P(e,"0px",!1),i.style.setProperty("transform","translate(calc(var(--igi-position) + var(--igi-swipe)),0)"),i.style.setProperty("display","flex");var n=i.querySelector("img");null!==n&&n.style.setProperty("pointer-events","none"),p[e]=t.addZoom(i.firstChild,i,(function(){m(e),setTimeout((function(){w(e)}),50)}),(function(){w(e)})),t.addSwipe(i,(function(t){if(!(p[e].hasZoom()||s<=1)){var i=t.changeX+"px";P(e-1,i,!1),P(e,i,!1),P(e+1,i,!1)}}),(function(t){if(!(p[e].hasZoom()||s<=1)){var i=t.changeX;Math.abs(i)>40&&z(i>0?u-1:u+1)||(P(e-1,"0px",!0),P(e,"0px",!0),P(e+1,"0px",!0))}}))}(c);var N=l.childNodes[0],A=l.childNodes[1],E=l.childNodes[2],L=l.childNodes[3],C=l.childNodes[4];g=function(){s>1&&(N.style.display=u+1<s?"flex":"none",A.style.display=0===u?"none":"flex");var e=p[u],t=y(u)>1,i=e.hasZoom();L.style.display=t&&!i?"block":"none",C.style.display=i?"block":"none"};var I=function(e){p[u].hasZoom()&&p[u].zoomOut(),z(e)};N.addEventListener("click",(function(){I(u+1)})),A.addEventListener("click",(function(){I(u-1)})),E.addEventListener("click",n.close),L.addEventListener("click",(function(){p[u].zoomIn(y(u)),g()})),C.addEventListener("click",(function(){p[u].zoomOut(),g()})),g(),document.body.addEventListener("keydown",(function(e){if(document.getElementById(d)){var t=e.keyCode;39===t?I(u+1):37===t&&I(u-1)}})),window.addEventListener("resize",(function(){var t=document.getElementById(d);if(t){for(var i=t.firstChild.childNodes,n=0;n<i.length;n++){var o=i[n].firstChild;o.style.width=e(o.getAttribute("data-max-width"),o.getAttribute("data-max-height"))+"px"}g()}}))}))}}))};void 0!==t[o]?r(t[o]):clientPackages.get("serverRequests").then((function(e){e.send("-ivopetkov-image-gallery-get-images",{serverData:o}).then((function(e){t[o]=e,r(e)}))}))}}}();
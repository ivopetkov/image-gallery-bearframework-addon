/*
 * Image gallery addon for Bear Framework
 * https://github.com/ivopetkov/image-gallery-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */
var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var e=function(e,t){var i=window.innerWidth-10,n=window.innerHeight-10;return t>n&&(e*=n/t),e>i&&(e=i),e},t={},i=!1,n=function(){var t=document.getElementById("imggalleryswp0");if(t)for(var i=t.firstChild.childNodes,n=0;n<i.length;n++){var a=i[n].firstChild;a.style.width=e(a.getAttribute("data-max-width"),a.getAttribute("data-max-height"))+"px"}};return{open:function(a,o,r){i||(i=!0,window.addEventListener("resize",n));var s=function(t){try{var i=JSON.parse(t)}catch(e){i={}}void 0!==i.status&&"1"===i.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(){var t=i.result,n=t.length,o='<div id="imggalleryswp0" class="swiper-container" style="width:100vw;height:100vh;">';o+='<div class="swiper-wrapper">';for(var s=0;s<n;s++){var d=t[s];o+='<div class="swiper-slide" style="padding:5px;box-sizing:border-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-align:center;-webkit-align-items:center;-webkit-box-align:center;align-items:center;-moz-justify-content:center;-webkit-justify-content:center;justify-content:center;">',o+='<div data-max-width="'+d[0]+'" data-max-height="'+d[1]+'" style="width:'+e(d[0],d[1])+'px;font-size:0;line-height:0;"></div>',o+="</div>"}o+="</div>",o+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',o+='<span data-image-gallery-button="next"></span>',o+='<span data-image-gallery-button="previous"></span>',o+='<span data-image-gallery-button="close"></span>',o+="</div>",o+="</div>",a.open(o,{spacing:"0px",showCloseButton:!1}).then((function(){for(var e=document.getElementById("imggalleryswp0"),i=0;i<n;i++){var o=t[i];html5DOMDocument.insert(o[2],[e.firstChild.childNodes[i].firstChild])}var s=new Swiper("#imggalleryswp0",{direction:"horizontal",loop:!1,keyboardControl:!0,mousewheelControl:!0});s.slideTo(r,0);var d=e.childNodes[1].childNodes[0];d.addEventListener("click",s.slideNext);var l=e.childNodes[1].childNodes[1];l.addEventListener("click",s.slidePrev),e.childNodes[1].childNodes[2].addEventListener("click",a.close);var v=function(e){n<2||(d.style.display=e+1<n?"flex":"none",l.style.display=0===e?"none":"flex")};s.on("slideChangeStart",(function(e){v(e.activeIndex)})),v(r)}))}))};void 0!==t[o]?s(t[o]):clientPackages.get("serverRequests").then((function(e){e.send("-ivopetkov-image-gallery-get-images",{serverData:o}).then((function(e){t[o]=e,s(e)}))}))}}}();
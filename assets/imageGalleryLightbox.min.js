var ivoPetkov=ivoPetkov||{};ivoPetkov.bearFrameworkAddons=ivoPetkov.bearFrameworkAddons||{},ivoPetkov.bearFrameworkAddons.imageGalleryLightbox=ivoPetkov.bearFrameworkAddons.imageGalleryLightbox||function(){var e=function(e,t){var i=window.innerWidth-10,n=window.innerHeight-10;return t>n&&(e*=n/t),e>i&&(e=i),Math.floor(e)},t={},i=0;return{open:function(n,o,a){i++;var r=function(t){try{var o=JSON.parse(t)}catch(e){o={}}void 0!==o.status&&"1"===o.status&&clientPackages.get("-ivopetkov-image-gallery-lightbox-requirements").then((function(t){if(n.isActive()){var r=o.result,s=r.length,d="imggalleryswp"+i,l='<div id="'+d+'" style="width:100%;height:100%;position:fixed;top:0;left:0;user-select:none;">';l+='<div style="position:absolute;top:0;left:0;width:100%;height:100%;">';for(var c=0;c<s;c++){var u=r[c];l+='<div style="display:none;position:absolute;top:0;left:0;width:100%;height:100%;padding:5px;box-sizing:border-box;display:flex;align-items:center;justify-content:center;overflow:hidden;">',l+='<div data-max-width="'+u[0]+'" data-max-height="'+u[1]+'" style="width:'+e(u[0],u[1])+'px;font-size:0;line-height:0;"></div>',l+="</div>"}l+="</div>",l+='<div style="z-index:10010001;position:fixed;top:0;left:0;">',l+='<span data-image-gallery-button="next"></span>',l+='<span data-image-gallery-button="previous"></span>',l+='<span data-image-gallery-button="close"></span>',l+='<span data-image-gallery-button="zoomin"></span>',l+='<span data-image-gallery-button="zoomout"></span>',l+="</div>",l+="</div>",n.open(l,{spacing:"0px",showCloseButton:!1}).then((function(){for(var i=document.getElementById(d),o=i.firstChild,l=i.childNodes[1],c=o.getBoundingClientRect().width,u=0;u<s;u++){var v=r[u];html5DOMDocument.insert(v[2],[o.childNodes[u].firstChild])}var p=a,f=[],h=o.childNodes,y=function(e){return o.childNodes[e].firstChild},g=function(e){var t=y(e);return parseInt(t.getAttribute("data-max-width"))/parseInt(t.style.width.replace("px",""))},m=null,x=function(e){var t=y(e).querySelector("[data-responsively-lazy]");if(null!==t){if(null===t.getAttribute("data-responsively-lazy-preferred-option")){t.setAttribute("data-responsively-lazy-preferred-option","999999");try{responsivelyLazy.run()}catch(e){}}}},w=[],b=function(e){void 0===w[e]&&(w[e]=null),f[e].hasZoom()!==w[e]&&m()},k=function(e){!function(e){h[e].style.setProperty("transition","transform 0.3s ease-out")}(e),setTimeout((function(){h[e].style.removeProperty("transition")}),316)},P=function(e){var t="0px";e<p?t="-100vw":e>p&&(t="100vw"),h[e].style.setProperty("--igi-position",t)},z=function(e,t,i){void 0!==r[e]&&(i&&k(e),h[e].style.setProperty("--igi-swipe",t))},N=function(e){if(void 0===r[e])return!1;p=e;for(var t=0;t<s;t++)P(t);return z(e-1,"0px",!0),z(e,"0px",!0),z(e+1,"0px",!0),m(),!0};for(u=0;u<h.length;u++)!function(e){var i=h[e];P(e),z(e,"0px",!1),i.style.setProperty("transform","translate(calc(var(--igi-position) + var(--igi-swipe)),0)"),i.style.setProperty("display","flex");var n=i.querySelector("img");null!==n&&n.style.setProperty("pointer-events","none"),f[e]=t.addZoom(i.firstChild,i,(function(){x(e),setTimeout((function(){b(e)}),50)}),(function(){b(e)})),t.addSwipe(i,(function(t){if(!(f[e].hasZoom()||s<=1)){var i=t.changeX+"px";z(e-1,i,!1),z(e,i,!1),z(e+1,i,!1)}}),(function(t){if(!(f[e].hasZoom()||s<=1)){var i=t.changeX;Math.abs(i)>.1*c&&N(i>0?p-1:p+1)||(z(e-1,"0px",!0),z(e,"0px",!0),z(e+1,"0px",!0))}}))}(u);var A=l.childNodes[0],E=l.childNodes[1],L=l.childNodes[2],C=l.childNodes[3],I=l.childNodes[4];m=function(){s>1&&(A.style.display=p+1<s?"flex":"none",E.style.display=0===p?"none":"flex");var e=f[p],t=g(p)>1,i=e.hasZoom();C.style.display=t&&!i?"block":"none",I.style.display=i?"block":"none"};var Z=function(e){f[p].hasZoom()&&f[p].zoomOut(),N(e)};A.addEventListener("click",(function(){Z(p+1)})),E.addEventListener("click",(function(){Z(p-1)})),L.addEventListener("click",n.close),C.addEventListener("click",(function(){f[p].zoomIn(g(p)),m()})),I.addEventListener("click",(function(){f[p].zoomOut(),m()})),m(),document.body.addEventListener("keydown",(function(e){if(document.getElementById(d)){var t=e.keyCode;39===t?Z(p+1):37===t&&Z(p-1)}})),window.addEventListener("resize",(function(){var t=document.getElementById(d);if(t){for(var i=t.firstChild.childNodes,n=0;n<i.length;n++){var o=i[n].firstChild;o.style.width=e(o.getAttribute("data-max-width"),o.getAttribute("data-max-height"))+"px"}m()}}))}))}}))};void 0!==t[o]?r(t[o]):clientPackages.get("serverRequests").then((function(e){e.send("-ivopetkov-image-gallery-get-images",{serverData:o}).then((function(e){t[o]=e,r(e)}))}))}}}();